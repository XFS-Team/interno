---
import Text from "../../../common/Text/Text.svelte";
import Title from "../../../common/Title/Title.svelte";

export interface Props {
  title: string;
  content: string;
}

const { title, content }: Props = Astro.props as Props;
---

<style>
  .isHidden {
    display: none;
  }
</style>

<script lang="ts">
  const buttonStates = {};

  document.addEventListener("DOMContentLoaded", () => {
    const buttons = document.querySelectorAll(".btn");

    buttons.forEach((button) => {
      button.addEventListener("click", () => {
        const contentElement = button.nextElementSibling;
        const image = button.querySelector("img");

        if (contentElement && image) {
          const isHidden = buttonStates[button.id] !== true;

          buttons.forEach((otherButton) => {
            if (otherButton !== button) {
              const otherContentElement = otherButton.nextElementSibling;
              if (otherContentElement) {
                otherContentElement.classList.add("isHidden");
                buttonStates[otherButton.id] = true;
              }
            }
          });

          buttonStates[button.id] = !isHidden;

          if (isHidden) {
            contentElement.classList.remove("isHidden");
          } else {
            contentElement.classList.add("isHidden");
          }

          const arrowImageSrc = isHidden
            ? "/images/FAQ/Icons/arrow_down.svg"
            : "/images/FAQ/Icons/arrow_up.svg";
          image.src = arrowImageSrc;
        }
      });
    });
  });
</script>

<div class="flex flex-col w-[585px] mb-[20px]">
  <button
    class="flex items-center justify-between w-[585px] btn pb-8 border-b-[1px] border-primary mb-[13px]"
  >
    <Title class="text-[25px] leading-[150%] tracking-[0.25px]">{title}</Title>
    <img class="mr-[22px]" src="/images/FAQ/Icons/arrow_up.svg" alt="" />
  </button>
  <div class="content w-[585px] isHidden mb-9">
    <Text>{content}</Text>
  </div>
</div>
